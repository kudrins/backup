## Домашнее задание Резервное копирование

### Описание домашнего задания
```
Настроить удаленный бэкап каталога /etc c сервера client при
помощи borgbackup. Резервные копии соответствуют
следующим критериям:
a. Директория для резервных копий /var/backup.
Отдельная точка монтирования. Отдельный диск 2Gb.
b. Репозиторий для резервных копий зашифрован паролем
c. Имя бэкапа содержит информацию о времени снятия бекапа.
d. Глубина бекапа год, хранить по
последней копии на конец месяца, кроме последних трех.
Последние три месяца содержат копии на каждый день.
e. Резервная копия снимается каждые 5 минут. Такой частый
запуск в целях демонстрации.
f. Написан скрипт для снятия резервных копий. 
Скрипт запускается из соответствующей Cron джобы.
g. Настроено логирование процесса бекапа, ротация лога. 

В VMware vSphere 7
разворачиваются и настраиваются VMs из шаблона Centos 8
- borg-client
    отправляет резервные копии на borg-srv
- borg-srv
    хранит резервные копии
  
Файлы:
- /ansible/newvm.yml:   ansible playbook развертывания и настройки VMs
- /ansible/vars.yml:    переменные для создания VMs в VMware vSphere 7
- /ansible/host:        Inventory
- /ansible/cron.yml:    ansible playbook устанавливает расписание 
                        резервного копирования на VM borg-client
 
 - borg-backup.sh:      /root/borg-backup.sh скрипт резервного копирования 
 - borg:                /etc/logrotate.d/ файл конфигурации ротации лога
 
 После отработки ansible playbook развертывания и настройки VMs,
 на VM borg-client запускается команда инициализации удаленного репозитория:

 #borg init --encryption=repokey borg@10.100.11.114:/var/backup/
 Вводится пароль.
 
 ansible playbook /ansible/cron.yml устанавливает расписание 
 резервного копирования на VM borg-client
 
 Результаты работы в скриншотах:
- log.jpg:  скриншот состояния репозитория хранения резервных копий и лога
            на 20:40
                                  
- log2.jpg: скриншот состояния репозитория хранения резервных копий
            на 20:45

Первая копия была сделана в 20:30
Изменений в копируемых данных не было.

 
